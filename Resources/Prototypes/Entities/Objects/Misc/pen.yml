- type: entity
  name: pen
  parent: BaseItem
  id: Pen
  description: A dark ink pen.
  components:
  - type: Sprite
    sprite: Objects/Misc/pens.rsi
    state: pen
  - type: Item
    sprite: Objects/Misc/pens.rsi
    heldPrefix: pen
    size: Tiny
  - type: Tag
    tags:
    - Write
    - Pen
  - type: PhysicalComposition
    materialComposition:
      Steel: 25
  - type: EmitSoundOnUse
    sound:
      path: /Audio/Items/pen_click.ogg
      params:
        volume: -4
        maxDistance: 2
  - type: UseDelay
    delay: 1.5

- type: entity
  parent: Pen
  id: PenEmbeddable
  abstract: true
  components:
  - type: EmbeddableProjectile
    offset: 0.3,0.0
    removalTime: 0.0
  - type: ThrowingAngle
    angle: 315
  - type: LandAtCursor
  - type: DamageOtherOnHit
    damage:
      types:
        Piercing: 3
#TODO: I want the luxury pen to write a cool font like Merriweather in the future.

- type: entity
  name: luxury pen
  parent: Pen
  id: LuxuryPen
  description: A fancy and expensive pen that you only deserve to own if you're qualified to handle vast amounts of paperwork.
  components:
  - type: Sprite
    state: luxury_pen
  - type: Item
    heldPrefix: luxury_pen

- type: entity
  id: BaseAdvancedPen
  parent: PenEmbeddable
  abstract: true
  components:
  - type: Tag
    tags:
    - Write
    - WriteIgnoreStamps
    - Pickaxe
    - Pen
  - type: MeleeWeapon
    wideAnimationRotation: -45
    damage:
      types:
        Piercing: 15
    soundHit:
      path: /Audio/Weapons/bladeslice.ogg
  - type: Tool
    qualities:
    - Screwing
    useSound:
      collection: Screwdriver

- type: entity
  name: Cybersun pen
  parent: [BaseAdvancedPen, BaseSyndicateContraband]
  id: CyberPen
  description: A high-tech pen straight from Cybersun's legal department, capable of refracting hard-light at impossible angles through its diamond tip in order to write. So powerful, it's even able to rewrite officially stamped documents should the need arise.
  components:
  - type: Sprite
    state: overpriced_pen
  - type: Item
    heldPrefix: overpriced_pen

- type: entity
  name: CentComm pen
  parent: [BaseAdvancedPen, BaseCentcommContraband]
  id: PenCentcom
  description: In an attempt to keep up with the "power" of the cybersun bureaucracy, NT made a replica of cyber pen, in their corporate style.
  components:
  - type: Sprite
    state: pen_centcom
  - type: Item
    heldPrefix: pen_centcom

- type: entity
  name: captain's fountain pen
  parent: [PenEmbeddable, BaseCommandContraband]
  id: PenCap
  description: A luxurious fountain pen for the captain of the station.
  components:
  - type: Sprite
    state: pen_cap

- type: entity
  name: hop's fountain pen
  parent: [PenEmbeddable, BaseCommandContraband]
  id: PenHop
  description: A luxurious fountain pen for the hop of the station.
  components:
  - type: Sprite
    state: pen_hop

- type: entity
  name: ce's pen
  parent: [PenEmbeddable, BasePowerCell, BaseCommandContraband]
  id: PenCE
  description: Keep away from borgs.
  components:
  - type: Sprite
    layers:
    - map: [ "enum.PowerCellVisualLayers.Base" ]
      state: pen_CE
    - map: [ "enum.PowerCellVisualLayers.Unshaded" ]
      state: o2
      shader: unshaded
  - type: Battery
    maxCharge: 360
    startingCharge: 360
  - type: BatterySelfRecharger
    autoRecharge: true
    autoRechargeRate: 3
  - type: DamageOtherOnHit
    damage:
      types:
        Piercing: 3
        Shock: 5
  - type: Tag
    tags:
      - PowerCell
      - Write
      - Pen

- type: entity
  name: rd's pen
  parent: [Pen, BaseCommandContraband]
  id: PenRD
  description: Contain it now!
  components:
  - type: Sprite
    sprite: Objects/Misc/pens.rsi
    layers:
      - state: pen_RD
      - state: pen_RD_ink-unshaded
        shader: unshaded
        visible: false
        map: ["enum.ToggleVisuals.Layer"]
  - type: Appearance
  - type: GenericVisualizer
    visuals:
      enum.ToggleVisuals.Toggled:
        enum.ToggleVisuals.Layer:
          True: { visible: true }
          False: { visible: false }
  - type: ItemToggle
  - type: ProximityBeeper
  - type: ProximityDetector
    range: 8
    criteria:
      components:
      - Anomaly
  - type: Beeper
    isMuted: true
    minBeepInterval: 0.01
    maxBeepInterval: 1.00
    beepSound:
      path: "/Audio/Items/locator_beep.ogg"
      params:
        maxDistance: 1
        volume: -6

- type: entity
  name: hos's pen
  parent: Flash
  id: PenHOS
  description: "Gentlemen, congratulations. You're everything we've come to expect from years of government training. Now please step this way, as we provide you with our final test: an eye exam..."
  components:
  - type: Sprite
    sprite: Objects/Misc/pens.rsi
    layers:
    - state: pen_HOS
      map: [ "enum.FlashVisuals.BaseLayer" ]
    - state: flashing
      map: [ "enum.FlashVisuals.LightLayer" ]
      visible: false
      shader: unshaded
  - type: LimitedCharges
    maxCharges: 3
    charges: 3
  - type: UseDelay
  - type: GenericVisualizer
    visuals:
      enum.FlashVisuals.Burnt:
        enum.FlashVisuals.BaseLayer:
          True: {state: pen_HOS_burned}
      enum.FlashVisuals.Flashing:
        enum.FlashVisuals.LightLayer:
          True: {visible: true}
          False: {visible: false}
  - type: Appearance
  - type: Item
    sprite: Objects/Misc/pens.rsi
    heldPrefix: pen
    size: Tiny
  - type: StealTarget
    stealGroup: HeadPens

- type: entity
  name: luxury qm's pen
  parent: [Pen, BaseCommandContraband]
  id: PenQM
  description: It's nothing personal, it's just business.
  components:
  - type: Sprite
    state: pen_QM
  - type: AnomalyCore
    timeToDecay: 12000
    startPrice: 0
    endPrice: 10000
  - type: ThrowingAngle
    angle: 315
  - type: LandAtCursor
  - type: DamageOtherOnHit
    damage:
      types:
        Blunt: 7

- type: entity
  name: cmo's pen
  parent: [Pen, BaseCommandContraband]
  id: PenCMO
  description: It hurts!
  components:
  - type: Sprite
    layers:
      - state: pen_CMO
      - state: pen_CMO_unshaded
        shader: unshaded
      - state: pen_CMO_cap
        visible: true
        map: ["enum.ToggleVisuals.Layer"]
  - type: Appearance
  - type: GenericVisualizer
    visuals:
      enum.ToggleVisuals.Toggled:
        enum.ToggleVisuals.Layer:
          True: { visible: false }
          False: { visible: true }
  - type: ItemToggle
  - type: ItemToggleMeleeWeapon
    activatedSoundOnHit:
      path: /Audio/Effects/lightburn.ogg
      params:
        volume: -8
    activatedDamage:
        types:
            Heat: 3
  - type: MeleeWeapon
    damage:
       types:
        Heat: 0
    